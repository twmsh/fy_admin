数据库表结构确定
model代码生成
api接口定义
api接口实现
rabbitmq，队列定义
rabbitmq消息消费，日志入库。


//---------------

以se5+x86+mysql基础结构


1）sync_broker
被动服务，接受box_agent的http请求。
订阅rabbitmq中盒子的日志消息，存入到数据库中（需定期清理，以免数据溢出）

. clap启动命令
. config,context类
. config文件解析
. 数据库dao
. log日志初始化
. server graceful shutdown
. http handler
. rabbitmq 消息处理

//-----
程序启动时，mysql还没启动好，程序启动应该不会报错，后续数据库连接应该能retry, lazy_connect, OK



~/tools/bin/mysql_gen.exe --db_url mysql://cf_user:cf123456@192.168.1.26:3306  --db_name cf_rs --file_path base_model.rs


依赖库
程序启动框架
http 接口定义和开发

2）box_agent
从Rabbitmq中订阅通知消息，触发同步（也有定时机制）
通过http从sync_broker摄像头/底库回去最新更新数据。
也可以跑在x86+sc5，用来同步底库（没有摄像头分配在上面）
小盒子状态(底库容量，cpu/磁盘空间，心跳)上传，（一般跑着小盒子上，也能扩展，可以跑着别的机器上）
接受本机算法推送的数据，进行预处理（合并），比对（可选），http上传到track_warehouse中


3) track_warehouse
可用来比对数据
数据库和文件系统保存数据
将记录转送到rabbitmq队列中
如果要上传到第三方，可开发新的程序，从rabbitmq中读取数据进行上传。