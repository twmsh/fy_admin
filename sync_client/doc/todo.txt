box 创建一个匿名队列，连接到exchange上
消息时正对某个box，还是所有box?

//--------------------------------
从rabbitmq读取到的消息


{
    "id":12,
    "type":"sync",
    "payload": "",
    "ts": "2022-01-01 00:00:00.123",
}

{
    "id":12,
    "type":"reset",
    "payload": "{
        "db":true,
        "camera":true,
    }",
    "ts": "2022-01-01 00:00:00.123",
}


{
    "id":12,
    "type":"reboot",
    "payload": "",
    "ts": "2022-01-01 00:00:00.123",
}

type: reset,reboot

//--------------------------------
发送到rabbitmq的消息

//---------------------------------------
device_id和hw_id的问题

box上传用 hw_id，服务端将hw_id转成device_id来获取camera信息。


//--------------------------------
sync_server应该增加一个Service,定时清除box_log表记录。
box表更新在线时间。

//-------------------------------------------------------------------
1) 从rabbitmq收到通知，以及定时触发，从服务端拉取更新数据，更新本地 db/person/camera
2) 将更新结果，操作日志，心跳（状态）发送到rabbitmq。
3） 从rabbitmq收到指令（重启/清除db/person/camera/上报机器状态(cpu,磁盘，db人数等)），执行指令，执行结果发送到rabbitmq

指令可以有ref_id，在返回结果中携带ref_id，这样命令和执行结果能对应起来。

sync_server应该增加一个Service,定时清除box_log表记录。

//-----------------------------
任务队列
同步通知，timer触发，命令通知，都转换成任务，放入队列中，
从任务队列中取出任务，执行，将需要pub的消息，放入到消息发送队列中。

rabbit发送队列
从消息队列中，取出消息，进行发送，注意重连问题。
设置消息的ttl
//-----------------------------
service:
1) TimerService, 定时生成心跳任务，放入到任务队列中
2) WorkerService, 从任务队列中取出任务，执行，执行完成后，将日志/结果 放到消息发送队列中
3) RabbitmqService
3.1）监听rabbitmq(consumer) ，将收到的消息，转成任务，放入到任务队列中
3.2) 从发送消息队列中，取出消息，发送到rabbitmq

//-----------------------------
从rabbitmq中接收到:
1) 同步通知 sync_notify
2) 操作指令 command

发送给rabbitmq:
1) 心跳
2）同步的更新结果，运行错误信息
3）指令运行结果

定时器触发
1) 同步通知
2）心跳